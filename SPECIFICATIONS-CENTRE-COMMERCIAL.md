# ğŸ¬ SpÃ©cifications Application Centre Commercial

## ğŸ“‹ Vue d'Ensemble du Projet

### Contexte
DÃ©veloppement d'une application web pour un centre commercial moderne (type Akoor, La City) permettant la gestion complÃ¨te des boutiques et l'expÃ©rience client optimisÃ©e.

### Objectifs
- Digitaliser la gestion du centre commercial
- Faciliter l'interaction entre boutiques et clients
- Optimiser l'expÃ©rience d'achat et de navigation
- Centraliser les donnÃ©es et analytics

---

## ğŸ‘¥ Profils Utilisateurs

### 1. ğŸ‘¨â€ğŸ’¼ Admin Centre Commercial
**RÃ´le :** Gestionnaire principal du centre commercial
**ResponsabilitÃ©s :** Supervision globale, gestion des boutiques, analytics

### 2. ğŸª Boutique (CommerÃ§ant)
**RÃ´le :** PropriÃ©taire/GÃ©rant de boutique
**ResponsabilitÃ©s :** Gestion produits, commandes, profil boutique

### 3. ğŸ›ï¸ Acheteur (Client Final)
**RÃ´le :** Visiteur/Client du centre commercial
**ResponsabilitÃ©s :** Navigation, achats, rÃ©servations

---

## ğŸ¯ FonctionnalitÃ©s DÃ©taillÃ©es par Profil

## ğŸ‘¨â€ğŸ’¼ ADMIN CENTRE COMMERCIAL

### ğŸ“Š Dashboard & Analytics
- **Vue d'ensemble temps rÃ©el**
  - Nombre de boutiques actives
  - Chiffre d'affaires global du centre
  - Trafic client (visiteurs/jour)
  - Taux d'occupation des espaces
  - Top boutiques performantes

- **Analytics avancÃ©es**
  - Graphiques de frÃ©quentation par zone
  - Analyse des pics d'affluence
  - Revenus par catÃ©gorie de boutique
  - Tendances saisonniÃ¨res
  - Rapports exportables (PDF, Excel)

### ğŸª Gestion des Boutiques
- **Validation et inscription**
  - Approbation des demandes d'inscription boutique
  - VÃ©rification des documents (SIRET, assurance, etc.)
  - Attribution d'emplacements
  - DÃ©finition des tarifs de location

- **Suivi des boutiques**
  - Liste complÃ¨te des boutiques
  - Statut (active, en attente, suspendue)
  - Historique des paiements de loyer
  - Gestion des contrats de location
  - Communication avec les commerÃ§ants

### ğŸ‘¥ Gestion des Utilisateurs
- **ModÃ©ration des comptes**
  - Validation des comptes boutiques
  - Suspension/rÃ©activation de comptes
  - Gestion des signalements clients
  - Historique des actions utilisateurs

### ğŸ¢ Gestion du Centre
- **Configuration des espaces**
  - Plan interactif du centre commercial
  - Gestion des emplacements disponibles
  - Tarification par zone (premium, standard, etc.)
  - Horaires d'ouverture globaux

- **Ã‰vÃ©nements et promotions**
  - CrÃ©ation d'Ã©vÃ©nements centre commercial
  - Gestion des promotions globales
  - Communication vers toutes les boutiques
  - Calendrier des animations

### ğŸ“± Communication
- **Notifications systÃ¨me**
  - Envoi de messages aux boutiques
  - Alertes systÃ¨me importantes
  - Newsletter du centre commercial

---

## ğŸª BOUTIQUE (COMMERÃ‡ANT)

### ğŸ¬ Profil Boutique
- **Informations gÃ©nÃ©rales**
  - Nom, logo, description de la boutique
  - CatÃ©gorie d'activitÃ© (mode, restauration, etc.)
  - Horaires d'ouverture spÃ©cifiques
  - CoordonnÃ©es et localisation dans le centre
  - Photos de la boutique et vitrine

- **Gestion administrative**
  - Documents lÃ©gaux (SIRET, assurance)
  - Contrat de location
  - Historique des paiements
  - Factures et reÃ§us

### ğŸ“¦ Gestion des Produits
- **Catalogue produits**
  - Ajout/modification/suppression de produits
  - Photos multiples par produit
  - Descriptions dÃ©taillÃ©es
  - Prix et promotions
  - Gestion des stocks en temps rÃ©el
  - CatÃ©gorisation des produits

- **Inventory management**
  - Alertes stock faible
  - Historique des mouvements de stock
  - Import/export de catalogues (CSV, Excel)
  - Codes-barres et rÃ©fÃ©rences produits

### ğŸ›’ Gestion des Commandes
- **Commandes en ligne**
  - RÃ©ception des commandes clients
  - Statut de prÃ©paration (en cours, prÃªte, livrÃ©e)
  - Gestion des rÃ©servations
  - Click & Collect (retrait en boutique)

- **Modes de livraison**
  - Retrait en boutique
  - Livraison dans le centre commercial
  - Livraison Ã  domicile (si proposÃ©e)

### ğŸ“Š Analytics Boutique
- **Performances de vente**
  - Chiffre d'affaires quotidien/mensuel
  - Produits les plus vendus
  - Analyse des pics de vente
  - Comparaison avec les autres boutiques (anonymisÃ©e)

- **ClientÃ¨le**
  - Nombre de visiteurs profil boutique
  - Taux de conversion
  - Avis et notes clients
  - FidÃ©litÃ© client

### ğŸ’° Gestion FinanciÃ¨re
- **Transactions**
  - Historique des ventes
  - Commissions centre commercial
  - Rapports financiers
  - Paiements en attente

### ğŸ“¢ Marketing & Promotions
- **Promotions boutique**
  - CrÃ©ation de codes promo
  - Soldes et rÃ©ductions
  - Offres spÃ©ciales
  - Programmes de fidÃ©litÃ©

- **Communication**
  - Messages aux clients
  - RÃ©ponses aux avis
  - ActualitÃ©s boutique

---

## ğŸ›ï¸ ACHETEUR (CLIENT FINAL)

### ğŸ¬ DÃ©couverte du Centre
- **Plan interactif**
  - Carte interactive du centre commercial
  - Localisation des boutiques par catÃ©gorie
  - ItinÃ©raires optimisÃ©s
  - Services disponibles (toilettes, parking, etc.)

- **Recherche et navigation**
  - Recherche par boutique, produit, catÃ©gorie
  - Filtres avancÃ©s (prix, marque, disponibilitÃ©)
  - Suggestions personnalisÃ©es
  - Boutiques favorites

### ğŸ›’ ExpÃ©rience d'Achat
- **Catalogue unifiÃ©**
  - Produits de toutes les boutiques
  - Comparaison de prix
  - DisponibilitÃ© en temps rÃ©el
  - Photos et descriptions dÃ©taillÃ©es

- **Panier et commandes**
  - Panier multi-boutiques
  - RÃ©servation de produits
  - Click & Collect
  - Suivi des commandes en temps rÃ©el

### ğŸ’³ Paiement et Livraison
- **Options de paiement**
  - Paiement en ligne sÃ©curisÃ©
  - Paiement en boutique
  - Portefeuille numÃ©rique
  - Paiement fractionnÃ© (si disponible)

- **Modes de retrait/livraison**
  - Retrait en boutique
  - Point de retrait centralisÃ©
  - Livraison dans le centre (consigne)
  - Livraison Ã  domicile

### ğŸ‘¤ Profil Client
- **Compte personnel**
  - Informations personnelles
  - Adresses de livraison
  - Moyens de paiement enregistrÃ©s
  - PrÃ©fÃ©rences d'achat

- **Historique et fidÃ©litÃ©**
  - Historique des achats
  - Points de fidÃ©litÃ© centre commercial
  - Coupons et rÃ©ductions personnalisÃ©es
  - Wishlist produits

### â­ Avis et Interactions
- **Ã‰valuations**
  - Avis sur les boutiques
  - Notes sur les produits
  - Photos clients
  - Recommandations

### ğŸ“± Services Pratiques
- **Informations pratiques**
  - Horaires du centre et des boutiques
  - Ã‰vÃ©nements et animations
  - Promotions en cours
  - ActualitÃ©s du centre

- **Services connectÃ©s**
  - RÃ©servation de parking
  - Localisation de voiture
  - Services de conciergerie
  - Assistance client

---

## ğŸ—„ï¸ ModÃ¨les de DonnÃ©es

### ğŸ‘¤ User
```javascript
{
  _id: ObjectId,
  email: String (unique),
  password: String (hashed),
  nom: String,
  prenom: String,
  role: Enum ['admin', 'boutique', 'client'],
  telephone: String,
  adresse: {
    rue: String,
    ville: String,
    codePostal: String,
    pays: String
  },
  dateCreation: Date,
  derniereConnexion: Date,
  isActive: Boolean,
  preferences: {
    notifications: Boolean,
    newsletter: Boolean,
    categories: [String]
  }
}
```

### ğŸª Boutique
```javascript
{
  _id: ObjectId,
  proprietaire: ObjectId (ref: User),
  nom: String,
  description: String,
  logo: String (URL),
  photos: [String],
  categorie: Enum ['mode', 'restauration', 'beaute', 'electronique', 'sport', 'maison', 'services'],
  emplacement: {
    etage: Number,
    zone: String,
    numeroLocal: String,
    surface: Number
  },
  horaires: {
    lundi: { ouverture: String, fermeture: String, ferme: Boolean },
    mardi: { ouverture: String, fermeture: String, ferme: Boolean },
    // ... autres jours
  },
  contact: {
    telephone: String,
    email: String,
    siteWeb: String,
    reseauxSociaux: {
      facebook: String,
      instagram: String,
      twitter: String
    }
  },
  informationsLegales: {
    siret: String,
    numeroTVA: String,
    assurance: String
  },
  contrat: {
    dateDebut: Date,
    dateFin: Date,
    loyerMensuel: Number,
    caution: Number,
    statut: Enum ['actif', 'suspendu', 'expire']
  },
  statistiques: {
    nombreProduits: Number,
    chiffreAffaires: Number,
    nombreCommandes: Number,
    noteGlobale: Number,
    nombreAvis: Number
  },
  dateCreation: Date,
  isActive: Boolean,
  isValidated: Boolean
}
```

### ğŸ“¦ Product
```javascript
{
  _id: ObjectId,
  boutique: ObjectId (ref: Boutique),
  nom: String,
  description: String,
  descriptionLongue: String,
  prix: Number,
  prixPromo: Number,
  pourcentageReduction: Number,
  images: [String],
  categorie: String,
  sousCategorie: String,
  marque: String,
  reference: String,
  codeBarres: String,
  stock: {
    quantite: Number,
    seuilAlerte: Number,
    enStock: Boolean
  },
  caracteristiques: {
    taille: [String],
    couleur: [String],
    matiere: String,
    poids: Number,
    dimensions: {
      longueur: Number,
      largeur: Number,
      hauteur: Number
    }
  },
  seo: {
    motsCles: [String],
    metaDescription: String
  },
  promotion: {
    active: Boolean,
    dateDebut: Date,
    dateFin: Date,
    typePromo: Enum ['pourcentage', 'montant', 'gratuit']
  },
  statistiques: {
    vues: Number,
    ventes: Number,
    noteGlobale: Number,
    nombreAvis: Number
  },
  dateCreation: Date,
  dateModification: Date,
  isActive: Boolean,
  isVisible: Boolean
}
```

### ğŸ›’ Order
```javascript
{
  _id: ObjectId,
  client: ObjectId (ref: User),
  boutiques: [{
    boutique: ObjectId (ref: Boutique),
    produits: [{
      produit: ObjectId (ref: Product),
      quantite: Number,
      prixUnitaire: Number,
      options: {
        taille: String,
        couleur: String
      }
    }],
    sousTotal: Number,
    statut: Enum ['en_attente', 'confirmee', 'en_preparation', 'prete', 'retiree', 'livree', 'annulee']
  }],
  numeroCommande: String (unique),
  montantTotal: Number,
  fraisLivraison: Number,
  reduction: {
    codePromo: String,
    montant: Number
  },
  modeLivraison: Enum ['retrait_boutique', 'retrait_central', 'livraison_centre', 'livraison_domicile'],
  adresseLivraison: {
    nom: String,
    rue: String,
    ville: String,
    codePostal: String,
    telephone: String
  },
  paiement: {
    methode: Enum ['carte', 'paypal', 'apple_pay', 'sur_place'],
    statut: Enum ['en_attente', 'paye', 'rembourse', 'echec'],
    transactionId: String,
    datePaiement: Date
  },
  dateCommande: Date,
  dateLivraisonPrevue: Date,
  dateLivraisonReelle: Date,
  notes: String,
  historique: [{
    statut: String,
    date: Date,
    commentaire: String
  }]
}
```

### â­ Review
```javascript
{
  _id: ObjectId,
  client: ObjectId (ref: User),
  boutique: ObjectId (ref: Boutique),
  produit: ObjectId (ref: Product), // optionnel
  commande: ObjectId (ref: Order), // optionnel
  note: Number (1-5),
  titre: String,
  commentaire: String,
  photos: [String],
  reponse: {
    texte: String,
    date: Date,
    auteur: ObjectId (ref: User)
  },
  likes: Number,
  signalements: Number,
  dateCreation: Date,
  isVisible: Boolean,
  isVerified: Boolean
}
```

### ğŸ‰ Event
```javascript
{
  _id: ObjectId,
  organisateur: ObjectId (ref: User),
  titre: String,
  description: String,
  image: String,
  type: Enum ['promotion', 'animation', 'ouverture', 'fermeture', 'maintenance'],
  dateDebut: Date,
  dateFin: Date,
  lieu: String,
  boutiquesParticipantes: [ObjectId (ref: Boutique)],
  isGlobal: Boolean, // Ã©vÃ©nement du centre ou boutique spÃ©cifique
  dateCreation: Date,
  isActive: Boolean
}
```

---

## ğŸ”§ Interfaces Frontend (Angular)

### ğŸ“± Composants Principaux

#### ğŸ‘¨â€ğŸ’¼ Admin Interface
```typescript
// Dashboard Components
AdminDashboardComponent
AdminAnalyticsComponent
AdminBoutiqueListComponent
AdminBoutiqueDetailComponent
AdminUserManagementComponent
AdminEventManagementComponent
AdminReportsComponent

// Services
AdminService
AnalyticsService
BoutiqueManagementService
```

#### ğŸª Boutique Interface
```typescript
// Boutique Management
BoutiqueDashboardComponent
BoutiqueProfileComponent
ProductListComponent
ProductFormComponent
OrderManagementComponent
BoutiqueAnalyticsComponent
PromotionManagementComponent

// Services
BoutiqueService
ProductService
OrderService
```

#### ğŸ›ï¸ Client Interface
```typescript
// Shopping Experience
HomeComponent
BoutiqueListComponent
ProductCatalogComponent
ProductDetailComponent
ShoppingCartComponent
CheckoutComponent
OrderTrackingComponent
UserProfileComponent
ReviewComponent

// Services
ShoppingService
CartService
OrderTrackingService
ReviewService
```

### ğŸ¨ Modules Angular
```typescript
// Core Modules
AuthModule
SharedModule
CoreModule

// Feature Modules
AdminModule
BoutiqueModule
ShoppingModule
UserModule

// Shared Components
HeaderComponent
FooterComponent
NavigationComponent
LoaderComponent
ModalComponent
```

---

## ğŸš€ FonctionnalitÃ©s AvancÃ©es

### ğŸ” Recherche et Filtres
- Recherche textuelle intelligente
- Filtres par prix, catÃ©gorie, boutique
- Tri par pertinence, prix, notes
- Suggestions de recherche
- Historique des recherches

### ğŸ“Š Analytics et Reporting
- Tableaux de bord temps rÃ©el
- Graphiques interactifs
- Export de donnÃ©es
- Alertes automatiques
- Comparaisons pÃ©riodiques

### ğŸ”” SystÃ¨me de Notifications
- Notifications push
- Emails automatiques
- SMS (optionnel)
- Notifications in-app
- PrÃ©fÃ©rences utilisateur

### ğŸ’³ Paiement et SÃ©curitÃ©
- IntÃ©gration Stripe/PayPal ???
- Paiement sÃ©curisÃ© SSL
- Sauvegarde des moyens de paiement
- Facturation automatique
- Gestion des remboursements

### ğŸ“± Responsive Design
- Mobile-first approach
- Progressive Web App (PWA)
- Offline capabilities
- Touch-friendly interface
- Performance optimisÃ©e

---

## ğŸ” SÃ©curitÃ© et Permissions

### Matrice des Permissions
| FonctionnalitÃ© | Admin | Boutique | Client |
|----------------|-------|----------|--------|
| Gestion boutiques | âœ… | âŒ | âŒ |
| Analytics globales | âœ… | âŒ | âŒ |
| Gestion produits | âœ… | âœ… | âŒ |
| Passer commandes | âŒ | âŒ | âœ… |
| Voir commandes | âœ… | âœ… (siennes) | âœ… (siennes) |
| ModÃ©ration avis | âœ… | âœ… (siennes) | âŒ |

### SÃ©curitÃ©
- Authentification JWT
- Hashage bcrypt
- Validation des donnÃ©es
- Protection CSRF
- Rate limiting
- Logs d'audit

---

---

## ğŸ¤ **Questions 

### ğŸ“‹ **Organisation & Workflow**

**Q1:** Quel sera notre workflow Git exact ?
- Branches par feature ou par dÃ©veloppeur ?
- Qui valide les pull requests ?
- FrÃ©quence des merges vers `dev` ?

**Q2:** Comment organiser les tÃ¢ches ?
- Utilisation d'un board Kanban (GitHub Projects, Trello) ?
- Attribution des modules entre nous ?
- SystÃ¨me de prioritÃ©s ?

**Q3:** Conventions de nommage ?
- Branches : `feature/nom-feature` ou `dev-prenom/feature` ?
- Commits : format conventionnel (feat:, fix:, docs:) ?
- Variables et fonctions : camelCase, snake_case ?

### ğŸ¨ **Frontend Angular**

**Q4:** Structure des composants ?
- Un composant par page ou dÃ©coupage plus fin ?
- Composants partagÃ©s dans un dossier `shared/` ?
- Services globaux vs services par module ?

**Q5:** Gestion d'Ã©tat ?
- Simple services avec BehaviorSubject ?
- NgRx pour un Ã©tat complexe ?
- LocalStorage pour la persistance ?

**Q6:** Styles SCSS ?
- Variables globales dans `styles.scss` ?
- Mixins partagÃ©s ?
- ThÃ¨me sombre/clair prÃ©vu ?

**Q7:** Responsive design ?
- Mobile-first ou desktop-first ?
- Breakpoints standards (768px, 1024px) ?
- Framework CSS (Bootstrap, Tailwind) ou CSS pur ?

### ğŸ”§ **Backend Express**

**Q8:** Structure des routes ?
- Groupement par entitÃ© (`/api/users`, `/api/products`) ?
- Versioning API (`/api/v1/`) ?
- Middleware d'authentification global ou par route ?

**Q9:** Validation des donnÃ©es ?
- Validation manuelle ?
- Validation cÃ´tÃ© frontend aussi ?

**Q10:** Gestion des fichiers ?
- Upload d'images produits oÃ¹ (Cloudinary, AWS S3) ?
- Taille max des fichiers ?
- Formats acceptÃ©s ?

### ğŸ—„ï¸ **Base de DonnÃ©es MongoDB**

**Q11:** SchÃ©mas Mongoose ?
- Validation stricte ou flexible ?
- Indexes pour les recherches ?
- Relations par rÃ©fÃ©rence ou embedding ?

**Q12:** DonnÃ©es de test ?
- Script de seed automatique ?
- DonnÃ©es rÃ©alistes ou basiques ?
- Reset de la DB en dÃ©veloppement ?

### ğŸ” **SÃ©curitÃ© & Authentification**

**Q13:** JWT Configuration ?
- DurÃ©e d'expiration des tokens ?
- Refresh tokens nÃ©cessaires ?
- Stockage cÃ´tÃ© client (localStorage, cookies) ?

**Q14:** Permissions granulaires ?
- Middleware de vÃ©rification des rÃ´les ?
- Permissions par ressource ou globales ?
- Gestion des erreurs 403/401 ?


