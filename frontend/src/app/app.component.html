<!-- Mall Application Template - Version SimplifiÃ©e -->
<div class="mall-app">
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="logo">
        <h1>ğŸ¬ {{ title() }}</h1>
      </div>
      <nav class="nav">
        <!-- Si utilisateur connectÃ© -->
        <div *ngIf="isLoggedIn" class="user-info">
          <span class="user-welcome">
            {{ getRoleIcon(currentUser?.role || '') }} 
            Bonjour {{ currentUser?.prenom }}
          </span>
          <button class="btn-secondary" (click)="logout()">
            ğŸšª DÃ©connexion
          </button>
        </div>
        
        <!-- Si utilisateur non connectÃ© -->
        <div *ngIf="!isLoggedIn" class="auth-buttons">
          <button class="btn-primary" (click)="showLogin = !showLogin; showRegister = false">
            {{ showLogin ? 'Fermer' : 'ğŸ” Connexion' }}
          </button>
          <button class="btn-outline" (click)="showRegister = !showRegister; showLogin = false">
            {{ showRegister ? 'Fermer' : 'ğŸ“ Inscription' }}
          </button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Modal de Connexion -->
  <div class="auth-modal" [class.show]="showLogin" *ngIf="showLogin">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ğŸ” Connexion</h2>
        <button class="close-btn" (click)="showLogin = false">Ã—</button>
      </div>
      
      <form (ngSubmit)="login()">
        <!-- SÃ©lection du rÃ´le -->
        <div class="form-group">
          <label for="loginRole">RÃ´le :</label>
          <select id="loginRole" [(ngModel)]="loginForm.role" name="role" class="form-select">
            <option value="client">ğŸ›ï¸ Client</option>
            <option value="boutique">ğŸª Boutique</option>
            <option value="admin">ğŸ‘¨â€ğŸ’¼ Administrateur</option>
          </select>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="loginEmail">Email :</label>
          <input 
            type="email" 
            id="loginEmail" 
            [(ngModel)]="loginForm.email" 
            name="email"
            placeholder="Votre email"
            required>
        </div>

        <!-- Mot de passe -->
        <div class="form-group">
          <label for="loginPassword">Mot de passe :</label>
          <input 
            type="password" 
            id="loginPassword" 
            [(ngModel)]="loginForm.password" 
            name="password"
            placeholder="Votre mot de passe"
            required>
        </div>

        <button type="submit" class="btn-primary btn-full">Se connecter</button>
      </form>

      <!-- Profils de dÃ©monstration -->
      <div class="demo-profiles">
        <h3>ğŸ­ Comptes de dÃ©monstration :</h3>
        <div class="demo-grid">
          <div 
            *ngFor="let profile of demoProfiles" 
            class="demo-card"
            [style.border-color]="getRoleColor(profile.role)"
            (click)="selectDemoProfile(profile)">
            <div class="demo-icon">{{ getRoleIcon(profile.role) }}</div>
            <div class="demo-info">
              <strong>{{ profile.role | titlecase }}</strong>
              <small>{{ profile.email }}</small>
            </div>
          </div>
        </div>
        <p class="demo-note">Cliquez sur un profil pour prÃ©-remplir le formulaire</p>
      </div>

      <div class="modal-footer">
        <p>Pas encore de compte ? 
          <a href="#" (click)="toggleAuthMode(); $event.preventDefault()">S'inscrire</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Modal d'Inscription -->
  <div class="auth-modal" [class.show]="showRegister" *ngIf="showRegister">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ğŸ“ Inscription</h2>
        <button class="close-btn" (click)="showRegister = false">Ã—</button>
      </div>
      
      <form (ngSubmit)="register()">
        <!-- SÃ©lection du rÃ´le -->
        <div class="form-group">
          <label for="registerRole">RÃ´le :</label>
          <select id="registerRole" [(ngModel)]="registerForm.role" name="role" class="form-select">
            <option value="client">ğŸ›ï¸ Client</option>
            <option value="boutique">ğŸª Boutique</option>
          </select>
        </div>

        <!-- Informations personnelles -->
        <div class="form-row">
          <div class="form-group">
            <label for="registerNom">Nom * :</label>
            <input 
              type="text" 
              id="registerNom" 
              [(ngModel)]="registerForm.nom" 
              name="nom"
              placeholder="Votre nom"
              required>
          </div>
          <div class="form-group">
            <label for="registerPrenom">PrÃ©nom * :</label>
            <input 
              type="text" 
              id="registerPrenom" 
              [(ngModel)]="registerForm.prenom" 
              name="prenom"
              placeholder="Votre prÃ©nom"
              required>
          </div>
        </div>

        <!-- Email et mot de passe -->
        <div class="form-group">
          <label for="registerEmail">Email * :</label>
          <input 
            type="email" 
            id="registerEmail" 
            [(ngModel)]="registerForm.email" 
            name="email"
            placeholder="Votre email"
            required>
        </div>

        <div class="form-group">
          <label for="registerPassword">Mot de passe * :</label>
          <input 
            type="password" 
            id="registerPassword" 
            [(ngModel)]="registerForm.password" 
            name="password"
            placeholder="Minimum 6 caractÃ¨res"
            required>
        </div>

        <!-- Informations optionnelles -->
        <div class="form-group">
          <label for="registerTelephone">TÃ©lÃ©phone :</label>
          <input 
            type="tel" 
            id="registerTelephone" 
            [(ngModel)]="registerForm.telephone" 
            name="telephone"
            placeholder="Votre numÃ©ro de tÃ©lÃ©phone">
        </div>

        <div class="form-group">
          <label for="registerAdresse">Adresse :</label>
          <textarea 
            id="registerAdresse" 
            [(ngModel)]="registerForm.adresse" 
            name="adresse"
            placeholder="Votre adresse complÃ¨te"
            rows="2"></textarea>
        </div>

        <button type="submit" class="btn-primary btn-full">S'inscrire</button>
      </form>

      <!-- Profils de dÃ©monstration -->
      <div class="demo-profiles">
        <h3>ğŸ­ Profils de test :</h3>
        <div class="demo-grid">
          <div 
            *ngFor="let profile of demoProfiles.slice(1)" 
            class="demo-card"
            [style.border-color]="getRoleColor(profile.role)"
            (click)="selectDemoProfile(profile)">
            <div class="demo-icon">{{ getRoleIcon(profile.role) }}</div>
            <div class="demo-info">
              <strong>{{ profile.role | titlecase }}</strong>
              <small>{{ profile.nom }} {{ profile.prenom }}</small>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <p>DÃ©jÃ  un compte ? 
          <a href="#" (click)="toggleAuthMode(); $event.preventDefault()">Se connecter</a>
        </p>
      </div>
    </div>
  </div>

  <!-- Contenu Principal -->
  <main class="main-content">
    <div class="container">
      <!-- Section Hero -->
      <section class="hero">
        <h2>Bienvenue dans votre Centre Commercial</h2>
        <p *ngIf="!isLoggedIn">Connectez-vous pour dÃ©couvrir toutes nos fonctionnalitÃ©s</p>
        <p *ngIf="isLoggedIn">
          Bonjour {{ currentUser?.prenom }}, 
          <span [style.color]="getRoleColor(currentUser?.role || '')">
            {{ getRoleIcon(currentUser?.role || '') }} {{ currentUser?.role | titlecase }}
          </span>
        </p>
        
        <!-- Statut Backend -->
        <div class="api-status">
          <span class="status-label">Backend :</span>
          <span class="status-value">{{ backendStatus }}</span>
        </div>
      </section>

      <!-- Dashboard utilisateur connectÃ© -->
      <section *ngIf="isLoggedIn" class="user-dashboard">
        <h2>{{ getRoleIcon(currentUser?.role || '') }} Dashboard {{ currentUser?.role | titlecase }}</h2>
        
        <div class="dashboard-cards">
          <!-- Admin Dashboard -->
          <div *ngIf="currentUser?.role === 'admin'" class="dashboard-card">
            <h3>ğŸ‘¨â€ğŸ’¼ Gestion Administrative</h3>
            <ul>
              <li>ğŸ“Š Statistiques globales</li>
              <li>ğŸª Gestion des boutiques</li>
              <li>ğŸ‘¥ Gestion des utilisateurs</li>
              <li>ğŸ“ˆ Rapports et analytics</li>
            </ul>
          </div>

          <!-- Boutique Dashboard -->
          <div *ngIf="currentUser?.role === 'boutique'" class="dashboard-card">
            <h3>ğŸª Gestion de Boutique</h3>
            <ul>
              <li>ğŸ“¦ Gestion des produits</li>
              <li>ğŸ“‹ Suivi des commandes</li>
              <li>ğŸ’° Tableau de bord des ventes</li>
              <li>âš™ï¸ ParamÃ¨tres de la boutique</li>
            </ul>
          </div>

          <!-- Client Dashboard -->
          <div *ngIf="currentUser?.role === 'client'" class="dashboard-card">
            <h3>ğŸ›ï¸ Espace Client</h3>
            <ul>
              <li>ğŸ›’ Mes commandes</li>
              <li>â¤ï¸ Mes favoris</li>
              <li>ğŸ‘¤ Mon profil</li>
              <li>ğŸ¯ Recommandations</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- FonctionnalitÃ©s gÃ©nÃ©rales -->
      <section *ngIf="!isLoggedIn" class="features">
        <h2>FonctionnalitÃ©s</h2>
        <div class="features-grid">
          <div class="feature-card">
            <h3>ğŸ‘¨â€ğŸ’¼ Interface Admin</h3>
            <p>Gestion complÃ¨te du centre commercial</p>
          </div>
          <div class="feature-card">
            <h3>ğŸª Interface Boutique</h3>
            <p>Outils pour gÃ©rer votre boutique</p>
          </div>
          <div class="feature-card">
            <h3>ğŸ›ï¸ Interface Client</h3>
            <p>Shopping et services personnalisÃ©s</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 Centre Commercial - Application MEAN Stack</p>
      <p>Angular SPA + Express.js + MongoDB</p>
    </div>
  </footer>
</div>

<router-outlet />