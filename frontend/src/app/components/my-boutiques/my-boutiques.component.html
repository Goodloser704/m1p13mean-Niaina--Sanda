<div class="my-boutiques-container">
  <!-- Header -->
  <div class="boutiques-header">
    <h2>ğŸª Mes Boutiques</h2>
    <div class="header-actions">
      <span class="boutiques-count">{{ boutiques.length }} boutique{{ boutiques.length > 1 ? 's' : '' }}</span>
      <button class="btn-debug" (click)="debugComponent()" style="background: #ffc107; color: black; margin-right: 0.5rem;">
        ğŸ” Debug
      </button>
      <button class="btn-primary" (click)="showCreateForm = true">
        â• Nouvelle Boutique
      </button>
    </div>
  </div>

  <!-- Formulaire de crÃ©ation (si demandÃ©) -->
  <div class="create-form-container" *ngIf="showCreateForm">
    <div class="create-form-header">
      <h3>â• CrÃ©er une nouvelle boutique</h3>
      <button class="btn-close" (click)="showCreateForm = false">Ã—</button>
    </div>
    <p class="form-note">Vous pouvez crÃ©er plusieurs boutiques avec des spÃ©cialitÃ©s diffÃ©rentes.</p>
    <button class="btn-secondary" (click)="goToRegistration()">
      ğŸ“ Aller au formulaire d'inscription
    </button>
  </div>

  <!-- Liste des boutiques -->
  <div class="boutiques-grid" *ngIf="boutiques.length > 0">
    <div 
      *ngFor="let boutique of boutiques" 
      class="boutique-card"
      [class.pending]="boutique.statut === 'en_attente'"
      [class.approved]="boutique.statut === 'approuve'"
      [class.suspended]="boutique.statut === 'suspendu'">
      
      <!-- Header de la carte -->
      <div class="card-header">
        <div class="boutique-title">
          <h3>{{ boutique.nom }}</h3>
          <span class="category-badge">
            {{ getCategoryIcon(boutique.categorie) }} {{ boutique.categorie }}
          </span>
        </div>
        <div class="status-badge" [style.background-color]="getStatusColor(boutique.statut)">
          {{ getStatusText(boutique.statut) }}
        </div>
      </div>

      <!-- Informations boutique -->
      <div class="card-content">
        <p class="description" *ngIf="boutique.description">
          {{ boutique.description }}
        </p>
        
        <div class="boutique-details">
          <div class="detail-item" *ngIf="boutique.emplacement?.zone">
            <span class="detail-icon">ğŸ“</span>
            <span>{{ boutique.emplacement?.zone }}</span>
            <span *ngIf="boutique.emplacement?.etage !== undefined"> - Ã‰tage {{ boutique.emplacement?.etage }}</span>
          </div>
          
          <div class="detail-item" *ngIf="boutique.contact?.telephone">
            <span class="detail-icon">ğŸ“</span>
            <span>{{ boutique.contact?.telephone }}</span>
          </div>
          
          <div class="detail-item" *ngIf="boutique.contact?.email">
            <span class="detail-icon">ğŸ“§</span>
            <span>{{ boutique.contact?.email }}</span>
          </div>
          
          <div class="detail-item">
            <span class="detail-icon">ğŸ“…</span>
            <span>CrÃ©Ã©e le {{ formatDate(boutique.dateCreation) }}</span>
          </div>
        </div>

        <!-- Horaires rÃ©sumÃ©s -->
        <div class="horaires-summary" *ngIf="boutique.horaires">
          <span class="detail-icon">ğŸ•’</span>
          <span>{{ getHorairesSummary(boutique.horaires) }}</span>
        </div>
      </div>

      <!-- Actions -->
      <div class="card-actions">
        <button class="btn-action btn-view" (click)="viewBoutique(boutique)">
          ğŸ‘ï¸ Voir
        </button>
        
        <button 
          class="btn-action btn-edit" 
          (click)="editBoutique(boutique)"
          *ngIf="boutique.statut === 'en_attente' || boutique.statut === 'approuve'">
          âœï¸ Modifier
        </button>
        
        <button 
          class="btn-action btn-delete" 
          (click)="deleteBoutique(boutique)"
          *ngIf="boutique.statut === 'en_attente'">
          ğŸ—‘ï¸ Supprimer
        </button>
        
        <button 
          class="btn-action btn-manage" 
          (click)="manageBoutique(boutique)"
          *ngIf="boutique.statut === 'approuve'">
          âš™ï¸ GÃ©rer
        </button>
      </div>

      <!-- Messages selon le statut -->
      <div class="status-message">
        <div *ngIf="boutique.statut === 'en_attente'" class="message pending-message">
          â³ En attente de validation par un administrateur
        </div>
        <div *ngIf="boutique.statut === 'approuve'" class="message approved-message">
          âœ… Boutique active et opÃ©rationnelle
        </div>
        <div *ngIf="boutique.statut === 'suspendu'" class="message suspended-message">
          âš ï¸ Boutique suspendue - Contactez un administrateur
        </div>
      </div>
    </div>
  </div>

  <!-- Message si aucune boutique -->
  <div class="no-boutiques" *ngIf="boutiques.length === 0 && !isLoading">
    <div class="empty-state">
      <span class="empty-icon">ğŸª</span>
      <h3>Aucune boutique enregistrÃ©e</h3>
      <p>CrÃ©ez votre premiÃ¨re boutique pour commencer Ã  vendre dans notre centre commercial</p>
      <button class="btn-primary" (click)="goToRegistration()">
        â• CrÃ©er ma premiÃ¨re boutique
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div class="loading" *ngIf="isLoading">
    <p>â³ Chargement de vos boutiques...</p>
  </div>

  <!-- Modal de confirmation suppression -->
  <div class="modal-overlay" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>ğŸ—‘ï¸ Supprimer la boutique</h3>
        <button class="close-btn" (click)="closeDeleteModal()">Ã—</button>
      </div>
      
      <div class="modal-body">
        <p><strong>ÃŠtes-vous sÃ»r de vouloir supprimer cette boutique ?</strong></p>
        <p><strong>Nom :</strong> {{ selectedBoutique?.nom }}</p>
        <p><strong>CatÃ©gorie :</strong> {{ selectedBoutique?.categorie }}</p>
        <p class="warning">âš ï¸ Cette action est irrÃ©versible.</p>
      </div>
      
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeDeleteModal()">
          Annuler
        </button>
        <button 
          class="btn-danger" 
          (click)="confirmDeleteBoutique()"
          [disabled]="isDeleting">
          <span *ngIf="!isDeleting">ğŸ—‘ï¸ Supprimer</span>
          <span *ngIf="isDeleting">â³ Suppression...</span>
        </button>
      </div>
    </div>
  </div>
</div>