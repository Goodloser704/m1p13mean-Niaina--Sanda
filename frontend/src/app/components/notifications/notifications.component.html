<div class="notifications-container">
  <!-- Header avec compteur -->
  <div class="notifications-header">
    <h2>ğŸ”” Notifications</h2>
    <div class="notification-actions">
      <span class="unread-badge" *ngIf="unreadCount > 0">
        {{ unreadCount }} non lue{{ unreadCount > 1 ? 's' : '' }}
      </span>
      <button 
        class="btn-small" 
        (click)="markAllAsRead()"
        *ngIf="unreadCount > 0">
        âœ… Tout marquer comme lu
      </button>
      <button class="btn-small" (click)="refreshNotifications()">
        ğŸ”„ Actualiser
      </button>
    </div>
  </div>

  <!-- Filtres -->
  <div class="notification-filters">
    <button 
      class="filter-btn"
      [class.active]="selectedFilter === 'all'"
      (click)="setFilter('all')">
      Toutes ({{ notifications.length }})
    </button>
    <button 
      class="filter-btn"
      [class.active]="selectedFilter === 'unread'"
      (click)="setFilter('unread')">
      Non lues ({{ unreadCount }})
    </button>
    <button 
      class="filter-btn"
      [class.active]="selectedFilter === 'action'"
      (click)="setFilter('action')">
      Action requise ({{ getActionRequiredCount() }})
    </button>
  </div>

  <!-- Liste des notifications -->
  <div class="notifications-list">
    <div 
      *ngFor="let notification of getFilteredNotifications()" 
      class="notification-item"
      [class.unread]="!notification.isRead"
      [class.high-priority]="notification.priority === 'high' || notification.priority === 'urgent'">
      
      <!-- IcÃ´ne et prioritÃ© -->
      <div class="notification-icon">
        <span class="icon">{{ getNotificationIcon(notification.type) }}</span>
        <div 
          class="priority-indicator"
          [style.background-color]="getPriorityColor(notification.priority)">
        </div>
      </div>

      <!-- Contenu -->
      <div class="notification-content" (click)="markAsRead(notification._id)">
        <div class="notification-header">
          <h4>{{ notification.title }}</h4>
          <span class="notification-time">{{ getRelativeTime(notification.createdAt) }}</span>
        </div>
        <p class="notification-message">{{ notification.message }}</p>
        
        <!-- Actions spÃ©cifiques -->
        <div class="notification-actions" *ngIf="notification.actionRequired">
          <div *ngIf="notification.actionType === 'approve_boutique'" class="boutique-actions">
            <button 
              class="btn-approve"
              (click)="approveBoutique(notification.relatedEntity?.entityId, $event)">
              âœ… Approuver
            </button>
            <button 
              class="btn-reject"
              (click)="rejectBoutique(notification.relatedEntity?.entityId, $event)">
              âŒ Rejeter
            </button>
          </div>
        </div>
      </div>

      <!-- Actions gÃ©nÃ©rales -->
      <div class="notification-menu">
        <button 
          class="btn-icon"
          (click)="markAsRead(notification._id)"
          *ngIf="!notification.isRead"
          title="Marquer comme lu">
          âœ…
        </button>
        <button 
          class="btn-icon"
          (click)="archiveNotification(notification._id)"
          title="Archiver">
          ğŸ—‘ï¸
        </button>
      </div>
    </div>

    <!-- Message si aucune notification -->
    <div class="no-notifications" *ngIf="getFilteredNotifications().length === 0">
      <div class="empty-state">
        <span class="empty-icon">ğŸ””</span>
        <h3>Aucune notification</h3>
        <p>{{ getEmptyMessage() }}</p>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="notifications-pagination" *ngIf="notifications.length >= 20">
    <button class="btn-small" (click)="loadMore()">
      Charger plus
    </button>
  </div>
</div>